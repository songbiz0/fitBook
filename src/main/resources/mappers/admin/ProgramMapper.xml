<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.fitbook.admin.AdminMapper">
    <insert id="insProgram" useGeneratedKeys="true" keyProperty="iprogram" keyColumn="iprogram">
        INSERT INTO t_program
        (nm, required_cpu, required_gpu, required_ram, img)
        VALUES
        (#{nm}, ${required_cpu}, ${required_gpu}, ${required_ram}, #{img})
    </insert>

    <select id="selProgramList" resultType="ProgramVo">
        SELECT *
        FROM t_program
        <if test="search != null and search != ''">
            WHERE nm LIKE CONCAT('%', #{search}, '%')
        </if>
        <if test="cpu == 1">
            ORDER BY required_cpu
        </if>
        <if test="cpu == 2">
            ORDER BY required_cpu DESC
        </if>
        <if test="gpu == 1">
            ORDER BY required_gpu
        </if>
        <if test="gpu == 2">
            ORDER BY required_gpu DESC
        </if>
        <if test="ram == 1">
            ORDER BY required_ram
        </if>
        <if test="ram == 2">
            ORDER BY required_ram DESC
        </if>
    </select>
</mapper>